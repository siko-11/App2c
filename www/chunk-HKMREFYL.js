import{a as R}from"./chunk-HUS6YHHP.js";import{$ as N,A as P,M as w,N as y,Q as V,S as F,T as $,U as z,V as B,W as M,ba as O,c as d,ca as G,d as _,e as h,f as l,g as x,ga as j,h as b,ha as D,i as C,j as p,ja as H,k as n,ka as J,l as o,la as L,m as f,n as I,o as u,p as s,q as S,r as a,ra as U,s as v,t as g,x as E,y as k,z as T}from"./chunk-7JSJLXP4.js";import"./chunk-7CBVZGVG.js";import"./chunk-CHK7ZTV7.js";import"./chunk-FIRK2ZPN.js";import"./chunk-BK2SWOBY.js";import"./chunk-W2DKFL3W.js";import"./chunk-GFAQE7C7.js";import"./chunk-4U6PRYVA.js";import"./chunk-NDXL6NHI.js";import"./chunk-JWIEPCRG.js";import"./chunk-C5RQ2IC2.js";import"./chunk-D4VGNZLR.js";import"./chunk-JHLW7V75.js";import"./chunk-SV7S5NYR.js";import"./chunk-RW4GY4BD.js";function A(r,c){if(r&1){let i=I();n(0,"ion-item")(1,"ion-thumbnail",1),f(2,"img",6),o(),n(3,"ion-label")(4,"h2"),a(5),o(),n(6,"p"),a(7),o(),n(8,"p"),a(9),o(),n(10,"p"),a(11),o()(),n(12,"ion-buttons",7)(13,"ion-button",8),u("click",function(){let e=d(i).$implicit,m=s(2);return _(m.disminuirCantidad(e))}),a(14,"-"),o(),n(15,"ion-badge"),a(16),o(),n(17,"ion-button",9),u("click",function(){let e=d(i).$implicit,m=s(2);return _(m.aumentarCantidad(e))}),a(18,"+"),o(),n(19,"ion-button",10),u("click",function(){let e=d(i).$implicit,m=s(2);return _(m.eliminarProducto(e))}),f(20,"ion-icon",11),o()()()}if(r&2){let i=c.$implicit,t=s(2);l(2),p("src",t.servG.imagenUrl(i.prod_imagen),h),l(3),v(i.prod_nombre),l(2),g("C\xF3digo: ",i.prod_codigo,""),l(2),g("Precio: $",i.prod_precio,""),l(2),g("Total: $",i.prod_precio*i.cantidad,""),l(5),v(i.cantidad)}}function K(r,c){if(r&1&&(n(0,"ion-list"),C(1,A,21,6,"ion-item",5),o()),r&2){let i=s();l(),p("ngForOf",i.carrito)}}function Q(r,c){if(r&1){let i=I();n(0,"ion-card")(1,"ion-card-content")(2,"h2"),a(3),o(),n(4,"ion-button",12),u("click",function(){d(i);let e=s();return _(e.finalizarCompra())}),a(5,"Finalizar Compra"),o()()()}if(r&2){let i=s();l(3),g("Total a pagar: $",i.calcularTotal(),"")}}function W(r,c){r&1&&(n(0,"ion-item")(1,"ion-label"),a(2,"No hay productos en el carrito."),o()())}var ot=(()=>{let c=class c{constructor(t,e){this.servG=t,this.navCtrl=e,this.carrito=[]}ngOnInit(){let t=localStorage.getItem("carrito");this.carrito=t?JSON.parse(t):[]}guardarCarrito(){localStorage.setItem("carrito",JSON.stringify(this.carrito))}aumentarCantidad(t){t.cantidad++,this.guardarCarrito()}disminuirCantidad(t){t.cantidad>1?t.cantidad--:this.eliminarProducto(t),this.guardarCarrito()}eliminarProducto(t){this.carrito=this.carrito.filter(e=>e.prod_codigo!==t.prod_codigo),this.guardarCarrito()}calcularTotal(){return this.carrito.reduce((t,e)=>t+e.prod_precio*e.cantidad,0)}finalizarCompra(){this.servG.fun_Mensaje("Gracias por tu compra."),this.carrito=[],localStorage.removeItem("carrito"),this.navCtrl.navigateBack("/catalogo")}};c.\u0275fac=function(e){return new(e||c)(x(R),x(y))},c.\u0275cmp=b({type:c,selectors:[["app-carrito"]],decls:11,vars:3,consts:[["vacio",""],["slot","start"],["defaultHref","/catalogo"],[4,"ngIf","ngIfElse"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"src"],["slot","end"],["size","small","color","danger",3,"click"],["size","small","color","success",3,"click"],["color","medium",3,"click"],["name","trash-outline"],["expand","block","color","primary",3,"click"]],template:function(e,m){if(e&1&&(n(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),a(3,"Mi Carrito"),o(),n(4,"ion-buttons",1),f(5,"ion-back-button",2),o()()(),n(6,"ion-content"),C(7,K,2,1,"ion-list",3)(8,Q,6,1,"ion-card",4)(9,W,3,0,"ng-template",null,0,E),o()),e&2){let q=S(10);l(7),p("ngIf",m.carrito.length>0)("ngIfElse",q),l(),p("ngIf",m.carrito.length>0)}},dependencies:[z,O,P,k,T,w,L,J,V,N,D,G,H,j,$,F,U,B,M],encapsulation:2});let r=c;return r})();export{ot as CarritoPage};
