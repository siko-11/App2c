import{a as q}from"./chunk-5VTTDAOW.js";import{A as J,B as L,C as U,G as R,c as V,d as F,e as M,f as $,g as z,m as B,o as N,p as O,r as G,v as j,w as D,z as H}from"./chunk-QFENY27U.js";import"./chunk-PFJRT2TD.js";import"./chunk-ZUD6CBX5.js";import"./chunk-HNNBZF6L.js";import"./chunk-DYZFNGCR.js";import"./chunk-HC6MZPB3.js";import"./chunk-IP3IRUG3.js";import"./chunk-DXHA4IBJ.js";import"./chunk-RMJ7PCZJ.js";import"./chunk-7KXXZ5W4.js";import"./chunk-3537T4CH.js";import"./chunk-UNHUYKWX.js";import"./chunk-MCRJI3T3.js";import"./chunk-5VHT2D3M.js";import"./chunk-UP7NLS5G.js";import"./chunk-GNOVVPTF.js";import"./chunk-BAKMWPBW.js";import"./chunk-5OMUW5VI.js";import"./chunk-OBXDPQ3V.js";import{B as p,C as n,D as o,E as f,I,J as u,K as s,R as S,Ra as w,S as a,Sa as y,T as v,U as g,Z as E,ba as k,ca as T,ea as P,j as d,k as _,q as h,r as l,s as x,u as b,y as C}from"./chunk-433AV7YM.js";import"./chunk-7KXC3Z5D.js";import"./chunk-FG5LD4HX.js";import"./chunk-NWPDKS2D.js";import"./chunk-45GAR437.js";import"./chunk-GFAQE7C7.js";import"./chunk-ILEDPWO7.js";import"./chunk-JWIEPCRG.js";import"./chunk-C5RQ2IC2.js";import"./chunk-SV7S5NYR.js";import"./chunk-RW4GY4BD.js";function K(r,c){if(r&1){let i=I();n(0,"ion-item")(1,"ion-thumbnail",1),f(2,"img",6),o(),n(3,"ion-label")(4,"h2"),a(5),o(),n(6,"p"),a(7),o(),n(8,"p"),a(9),o(),n(10,"p"),a(11),o()(),n(12,"ion-buttons",7)(13,"ion-button",8),u("click",function(){let e=d(i).$implicit,m=s(2);return _(m.disminuirCantidad(e))}),a(14,"-"),o(),n(15,"ion-badge"),a(16),o(),n(17,"ion-button",9),u("click",function(){let e=d(i).$implicit,m=s(2);return _(m.aumentarCantidad(e))}),a(18,"+"),o(),n(19,"ion-button",10),u("click",function(){let e=d(i).$implicit,m=s(2);return _(m.eliminarProducto(e))}),f(20,"ion-icon",11),o()()()}if(r&2){let i=c.$implicit,t=s(2);l(2),p("src",t.servG.imagenUrl(i.prod_imagen),h),l(3),v(i.prod_nombre),l(2),g("C\xF3digo: ",i.prod_codigo,""),l(2),g("Precio: $",i.prod_precio,""),l(2),g("Total: $",i.prod_precio*i.cantidad,""),l(5),v(i.cantidad)}}function Q(r,c){if(r&1&&(n(0,"ion-list"),C(1,K,21,6,"ion-item",5),o()),r&2){let i=s();l(),p("ngForOf",i.carrito)}}function W(r,c){if(r&1){let i=I();n(0,"ion-card")(1,"ion-card-content")(2,"h2"),a(3),o(),n(4,"ion-button",12),u("click",function(){d(i);let e=s();return _(e.finalizarCompra())}),a(5,"Finalizar Compra"),o()()()}if(r&2){let i=s();l(3),g("Total a pagar: $",i.calcularTotal(),"")}}function X(r,c){r&1&&(n(0,"ion-item")(1,"ion-label"),a(2,"No hay productos en el carrito."),o()())}var rt=(()=>{let c=class c{constructor(t,e){this.servG=t,this.navCtrl=e,this.carrito=[]}ngOnInit(){let t=localStorage.getItem("carrito");this.carrito=t?JSON.parse(t):[]}guardarCarrito(){localStorage.setItem("carrito",JSON.stringify(this.carrito))}aumentarCantidad(t){t.cantidad++,this.guardarCarrito()}disminuirCantidad(t){t.cantidad>1?t.cantidad--:this.eliminarProducto(t),this.guardarCarrito()}eliminarProducto(t){this.carrito=this.carrito.filter(e=>e.prod_codigo!==t.prod_codigo),this.guardarCarrito()}calcularTotal(){return this.carrito.reduce((t,e)=>t+e.prod_precio*e.cantidad,0)}finalizarCompra(){this.servG.fun_Mensaje("Gracias por tu compra."),this.carrito=[],localStorage.removeItem("carrito"),this.navCtrl.navigateBack("/catalogo")}};c.\u0275fac=function(e){return new(e||c)(x(q),x(y))},c.\u0275cmp=b({type:c,selectors:[["app-carrito"]],decls:11,vars:3,consts:[["vacio",""],["slot","start"],["defaultHref","/catalogo"],[4,"ngIf","ngIfElse"],[4,"ngIf"],[4,"ngFor","ngForOf"],[3,"src"],["slot","end"],["size","small","color","danger",3,"click"],["size","small","color","success",3,"click"],["color","medium",3,"click"],["name","trash-outline"],["expand","block","color","primary",3,"click"]],template:function(e,m){if(e&1&&(n(0,"ion-header")(1,"ion-toolbar")(2,"ion-title"),a(3,"Mi Carrito"),o(),n(4,"ion-buttons",1),f(5,"ion-back-button",2),o()()(),n(6,"ion-content"),C(7,Q,2,1,"ion-list",3)(8,W,6,1,"ion-card",4)(9,X,3,0,"ng-template",null,0,E),o()),e&2){let A=S(10);l(7),p("ngIf",m.carrito.length>0)("ngIfElse",A),l(),p("ngIf",m.carrito.length>0)}},dependencies:[R,V,F,M,$,z,B,N,O,G,j,D,H,J,L,U,P,k,T,w],encapsulation:2});let r=c;return r})();export{rt as CarritoPage};
